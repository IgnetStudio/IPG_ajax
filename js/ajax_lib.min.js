function AJAX(a){return this instanceof AJAX?(this._xhr=new XMLHttpRequest,this._config=this._extendOptions(a),this._assignEvents(),void this._beforeSend()):new AJAX(a)}AJAX.prototype._extendOptions=function(a){var b=JSON.parse(JSON.stringify(this._defaultConfig));for(var c in b)c in a||(a[c]=b[c]);return a},AJAX.prototype._assignEvents=function(){this._xhr.addEventListener("readystatechange",this._handleResponse.bind(this),!1),this._xhr.addEventListener("abort",this._handleError.bind(this),!1),this._xhr.addEventListener("error",this._handleError.bind(this),!1),this._xhr.addEventListener("timeout",this._handleError.bind(this),!1)},AJAX.prototype._assignUserHeaders=function(){if(Object.keys(this._config.headers).length)for(var a in this._config.headers)this._xhr.setRequestHeader(a,this._config.headers[a])},AJAX.prototype._open=function(){this._xhr.open(this._config.type,this._config.url,this._config.options.async,this._config.options.username,this._config.options.password),this._xhr.setRequestHeader("X-Requested-With","XMLHttpRequest"),this._xhr.timeout=this._config.options.timeout},AJAX.prototype._beforeSend=function(){var a=Object.keys(this._config.data).length>0,b=null;"POST"===this._config.type.toUpperCase()&&a?b=this._serializeFormData(this._config.data):"GET"===this._config.type.toUpperCase()&&a&&(this._config.url+="?"+this._serializeData(this._config.data)),this._open(),this._assignUserHeaders(),this._send(b)},AJAX.prototype._send=function(a){this._xhr.send(a)},AJAX.prototype._handleResponse=function(){4===this._xhr.readyState&&this._xhr.status>=200&&this._xhr.status<400?"function"==typeof this._config.success&&this._config.success(this._xhr.response,this._xhr):4===this._xhr.readyState&&this._xhr.status>=400&&this._handleError()},AJAX.prototype._handleError=function(){"function"==typeof this._config.failure&&this._config.failure(this._xhr)},AJAX.prototype._serializeData=function(a){var b="";for(var c in a)b+=c+"="+encodeURIComponent(a[c])+"&";return b.slice(0,b.length-1)},AJAX.prototype._serializeFormData=function(a){var b=new FormData;for(var c in a)b.append(c,a[c]);return b},AJAX.prototype._defaultConfig={type:"GET",url:window.location.href,data:{},options:{async:!0,timeout:0,username:null,password:null},headers:{}},AJAX({type:"GET",url:"lib.php",data:{firstName:"Jan",lastName:"Nowak Jeziorański"},headers:{"X-My-Header":"012#placeholder"},success:function(a,b){console.log("Ok, status: "+b.status)},failure:function(a){console.log("Źle, status: "+a.status)}});